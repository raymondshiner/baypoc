!function(){"use strict";var e="snaptr",n="https://tr.snapchat.com",t=n+"/p",i=n+"/log/error",o=n+"/init",r="__scpt__",a="__LIVE__",s="_sctr",d="cmdone",c=34186698e3,u="_scid",l={age:"u_age",gender:"u_gd",firstname:"u_fn",lastname:"u_ln",device_brand:"d_br",device_model:"d_md",device_type:"d_type",os_type:"d_ot",os_version:"d_os",locale_country:"d_lc",locale_language:"d_ll",user_agent:"d_ua",limited_ad_tracking:"d_lat",connection_type:"c_type",isp:"c_isp",integration:"intg",mobile_carrier:"c_mc",ip_address:"c_ip",lat:"l_lat",long:"l_lng",geo_country:"l_gc",geo_region:"l_gr",geo_metro:"l_gm",geo_city:"l_city",geo_postal_code:"l_gpc",geo_location_source:"l_ls",geo_address:"l_addr",price:"e_pr",item_category:"e_ic",item_ids:"e_iids",currency:"e_cur",number_items:"e_ni",transaction_id:"e_tid",description:"e_desc",level:"e_lv",search_string:"e_ss",payment_info_available:"e_pia",sign_up_method:"e_sm",success:"e_su",event_tag:"et",brand_id:"br_id",data_use:"du",client_dedup_id:"cdid",client_deduplication_id:"cdid"};function p(e){return e&&36===e.length&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function h(){try{return window.self!==window.top}catch(e){return!0}}var m=!("addEventListener"in document);function g(e,n,t){t&&(m?e.attachEvent(n,t):e.addEventListener(n,t,!1))}function v(){if(h())try{return window.top.location.href}catch(e){try{return window.document.referrer}catch(e){return window.location.href}}return window.location.href}var w=function(){function e(e){return e&&e.performance?e.performance:null}var n=!1,t=null;try{(t=e(window.top))||(t=e(window),n=!0)}catch(i){t=e(window),n=!0}return[t,n]}(),_=w[0],y=w[1],b=!!(_&&_.mark&&_.getEntriesByName&&_.timing&&_.now);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:,I(e)}var k,S=function(){return S=Object.assign||,S.apply(this,arguments)};!function(e){e[e.Loading=0]="Loading",e[e.NotNeeded=1]="NotNeeded",e[e.Ready=2]="Ready"}(k||(k={}));var x=function(){var e=this;this.getPixelIdConfigsByFilter=,this.setInitConfig=function(n){e.initConfig=n,e.initConfigFinished=!0},this.isInitCofigReady=,this.getErrorLoggingPixelIds=,this.shouldLogError=,this.extractInitInfo=function(n){Object.keys(n).forEach((function(t){var i=n[t];i&&("u_em"===t||"user_email"===t?e.email=i.trim().toLowerCase():"u_hem"===t||"user_hashed_email"===t?e.hashedEmail=i.trim():"u_pn"===t||"user_phone_number"===t?e.phoneNumber=i.trim().replace(/[^\w]/gi,""):"u_hpn"===t||"user_hashed_phone_number"===t?e.hashedPhoneNumber=i.trim():"u_mai"===t||"user_mobile_ad_id"===t?e.mobileAdId=i.trim().toLowerCase():"u_hmai"===t||"user_hashed_mobile_ad_id"===t?e.hashedMobileAdId=i.trim():"u_pnid"===t||"partner_id"===t?e.partnerId=i.trim():"u_puid"===t||"user_partner_uid"===t?e.userPartnerUid=i.trim():t in l&&(e.additionalInfo[l[t]]=i))}))},this.toRequestParams=function(){var n={};return e.hashedEmail&&(n.u_hem=e.hashedEmail),e.hashedEmailDomain&&(n.u_hed=e.hashedEmailDomain),e.hashedPhoneNumber&&(n.u_hpn=e.hashedPhoneNumber),e.hashedMobileAdId&&(n.u_hmai=e.hashedMobileAdId),e.scut&&(n.u_scut=e.scut),e.userPartnerUid&&(n.u_puid=e.userPartnerUid),e.partnerId&&(n.u_pnid=e.partnerId),e.cookie1&&(n.u_c1=e.cookie1),e.srid&&(n.s_r_id=e.srid),S(S({},n),e.additionalInfo)},this.pixelIdList=[],this.hashState=k.NotNeeded,this.cookieSynced=!0,this.cookieSyncInProgress=!1,this.initConfigFinished=!1,this.additionalInfo={},this.initConfig={pixel_id_configs:[],error_log_sample_rate:0}};window.snaptrContext||(window.snaptrContext=new x);var E=window.snaptrContext,L=function(){var e=4022871197,n=function(n){n=n.toString();for(var t=0;t<n.length;t++){var i=.02519603282416938*(e+=n.charCodeAt(t));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)};return n.version="Mash 0.9",n},C=function(){return function(e){var n=0,t=0,i=0,o=1;0===e.length&&(e=[+new Date]);var r=L();n=r(" "),t=r(" "),i=r(" ");for(var a=0;a<e.length;a++)(n-=r(e[a]))<0&&(n+=1),(t-=r(e[a]))<0&&(t+=1),(i-=r(e[a]))<0&&(i+=1);r=null;var s=function(){var e=2091639*n+2.3283064365386963e-10*o;return n=t,t=i,i=e-(o=0|e)};return s.uint32=,s.fract53=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.version="Alea 0.9",s.args=e,s}(Array.prototype.slice.call(arguments))}(""+function e(n,t){var i=[];if(t&&"object"===I(n)&&(3===t||!n.location))for(var o in n)try{i.push(o,e(n[o],t-1))}catch(e){}return i.length?i:""+n}([(new Date).getTime(),navigator.userAgent,navigator.plugins,navigator.language,Math.random()],3));function T(e){var n,t=e?36:32,i="0123456789abcdef".split(""),o=[];e&&(o[8]=o[13]=o[18]=o[23]="-",o[14]="4");for(var r=0;r<t;r++)o[r]||(n=0|16*C.fract53(),o[r]=i[19===r?3&n|8:n]);return o.join("")}function A(e,n,t,i,o){var r=function(){var e=document.createElement("iframe"),n=function(){var e=N();for(;null!=document.getElementById(e);)e=N();return e}();return e.id=n,e.name=n,e}(),a=document.createElement("form");a.method=e,a.action=n,a.target=r.id,a.acceptCharset="utf-8",a.style.cssText="display: none",a.appendChild(r);var s=function(){!function(e,n,t){t&&(m?e.detachEvent(n,t):e.removeEventListener(n,t,!1))}(r,"load",s),Object.keys(t).forEach((function(e){if(t[e]){var n=document.createElement("input");n.name=e,n.value=t[e],a.appendChild(n)}})),g(r,"load",(function(){null!=i&&i(),o||setTimeout((function(){a.parentNode&&a.parentNode.removeChild(a)}),0)})),a.submit()};return g(r,"load",s),document.body.appendChild(a),r}function N(){return"snap"+Math.random().toString().replace(".","")}var P=,j=,O=;function B(){var e=D(u);if(null==e||!p(e)){e=T(1);var n=new Date;n.setTime(n.getTime()+c),M(u,e,n.toUTCString())}E.cookie1=e}function D(e){for(var n=e+"=",t=document.cookie.split(";"),i=t.length-1;i>=0;--i){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}function M(e,n,t,i,o){var r=function(){for(var e="_schn=_"+(Math.random()+1).toString(36).substring(6),n=(document.domain||document.location.hostname).split("."),t="",i=n.length-1;i>=0;i--)if(t="."+n[i]+t,document.cookie=e+";domain="+t+";SameSite=Lax",document.cookie.indexOf(e)>-1)return document.cookie=e.split("=")[0]+"=;domain="+t+";expires=Thu, 01 Jan 1970 00:00:01 GMT;SameSite=Lax",t;return null}();document.cookie=e+"="+n+";"+(null==r?"":"domain="+r+";")+(null==t?"":"expires="+t+";")+(null==i?"path=/;":"path="+i+";")+"SameSite=Lax"+(o?"; Secure":"")}function H(){var e=navigator.userAgent.toLowerCase(),n=-1!==e.indexOf("iphone"),t=-1!==e.indexOf("ipad"),i=-1!==e.indexOf("ipod"),o=n||t||i;return-1!==e.indexOf("snapchat")&&o}function J(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("snapchat")&&-1!==e.indexOf("android")}function U(e){var n=window.crypto||window.msCrypto;n&&n.subtle&&window.TextEncoder?function(e){var n=[];if(E.email){n.push(Z(E.email).then(()));var t="string"==typeof E.email&&E.email.split("@")[1];t&&n.push(Z(t).then(()))}E.phoneNumber&&n.push(Z(E.phoneNumber).then(()));E.mobileAdId&&n.push(Z(E.mobileAdId).then(()));Promise.all(n).then((function(){$(e)})).catch(())}(e):G(e)}function $(e){var n;E.email&&f(E.email)&&(E.hashedEmail=E.email),!E.email||f(E.email)||(n=E.email,/^[^@]+@[^@]+$/.test(n))||(E.hashedEmail="FFF"+E.hashedEmail),E.mobileAdId&&!p(E.mobileAdId)&&(E.hashedMobileAdId="FFF"+E.hashedMobileAdId),e()}function W(e,t){var i,r,a,u=e[0];if(u)if(p(u))if(-1===E.pixelIdList.indexOf(u)&&E.pixelIdList.push(u),E.pixelIdList&&E.pixelIdList.length&&window.fetch&&fetch(o+"?pids="+E.pixelIdList.join()).then((function(e){return e.json()})).then((function(e){"object"==typeof e&&E.setInitConfig(e)})).catch(()),function(){if(E.pixelIdList&&E.pixelIdList.length&&window.fetch){var e=location.hostname.split(".").pop();fetch(n+"/collector/is_enabled?pids="+E.pixelIdList.join()+"&tld="+e).then((function(e){return e.json()})).then((function(e){var t=e&&Object.keys(e).some((function(n){return!0===e[n]})),i=[];if(e&&e.ipg){var o=e.ipg;i.push.apply(i,o.split(","))}if(e&&e.t){var r=e.t;i.push.apply(i,r.split(","))}t&&function(e){document.addEventListener("submit",())}(i)})).catch(())}}(),a=function(e){if(null===e)return null;var n=e.split("|");return n.length<2?null:n[1].split(",")}(D(s)),null===(r=null===a||a.length<1?null:+a[0])||(new Date).valueOf()-r>6048e5)if(E.cookieSyncInProgress)m(0,t);else{E.cookieSynced=!1,E.cookieSyncInProgress=!0;var l=null===(i=e[1])||void 0===i?void 0:i.sync_modes,f=A("GET","https://tr.snapchat.com/cm/i",{pid:u,sync_modes:Array.isArray(l)?l.join(","):void 0},void 0,!0),h=function(e){var t,i,o;if((t=n+"/",i=e.origin+"/",null!=t&&null!=i&&t.substr(!o||o<0?0:+o,i.length)===i)&&e.data===d){try{var r=new Date;r.setHours(0,0,0,0);var a=new Date;a.setTime(a.getTime()+c);var u="1|"+r.valueOf();M(s,u,a.toUTCString(),void 0,!1)}catch(e){j("cookie_sync_error","possCookieSync error: "+e.message,e.stack)}E.cookieSynced=!0,E.cookieSyncInProgress=!1;var l=f.parentNode;l&&l.parentNode&&l.parentNode.removeChild(l)}};window.addEventListener?window.addEventListener("message",h):window.attachEvent("message",h),m(0,t)}else V(e,t);else j("invalid_params","Invalid pixel id in Init:"+u);function m(n,t){if(E.cookieSynced||n<0)return E.cookieSynced=!0,void V(e,t);setTimeout((function(){m(n-10,t)}),10)}}function X(e,n){var t;!function(){B(),E.scut=Q(r,window.location.search.substring(1)),E.scut&&M("snaptr-scut",E.scut);if(!E.scut){var e=document.referrer,n=e.indexOf("?");n>=0&&(E.scut=Q(r,e.substring(n+1)),E.scut&&M("snaptr-scut",E.scut))}if(!E.scut){var t=D("snaptr-scut");t&&(E.scut=t)}}(),(null===(t=e[1])||void 0===t?void 0:t.constructor)===Object&&(E.extractInitInfo(e[1]),E.hashState=k.Loading,U((function(){E.hashState=k.Ready,n()})))}function Q(e,n){for(var t=n.split("&"),i=0;i<t.length;i++){var o=t[i].split("=");if(o[0]===e)return o[1]}}function V(e,n){X(e,n),(J()||H())&&q(),n()}function K(n,i,o){if(p(n)){var r={trackId:T(1),pid:n,ev:i,pl:v(),ts:(new Date).valueOf(),rf:document.referrer,v:"1.6.0",if:h(),bt:a};if(o){var s=o;Object.keys(s).forEach(())}!function(n){if(!b)return;var t=null==_?void 0:_.timing,i=t?t.domInteractive-t.navigationStart:0,o=t?t.loadEventEnd-t.navigationStart:0,r=function(e){if(!b)return null;var n=null==_?void 0:_.getEntriesByName(e);if(n&&n.length>0)return n[n.length-1];return null}(e);r&&ee(n,"m_sl",Math.floor(r.startTime));_&&ee(n,"m_rd",Math.floor(_.now()));ee(n,"m_pi",i),ee(n,"m_pl",o),ee(n,"m_ic",+y)}(r);var d=E.toRequestParams(),c=S(S({},r),d);window.snaptr.sendPixelByGTM?window.snaptr.sendPixelByGTM(t+(c),Y,Y):A("POST",t,c)}else j("invalid_params","Invalid pixel id in sendPixelRequest:"+n)}function ee(e,n,t){null==t||t<0||(e[n]=t)}try{b&&(null==_||_.mark(e)),window.triedToSendCookieToNative=!1,function(){var e=window.sessionStorage&&window.sessionStorage.getItem("srid");if(e)E.srid=e;else{window.WebJSBridge={setSRID:};try{J()?window.JSBridge&&window.JSBridge.getSRID?window.JSBridge.getSRID():j("native_bridge_error","Snap android bridge missing. JSBridge defined: "+(void 0!==window.JSBridge)):H()&&(window.webkit&&window.webkit.messageHandlers.getSRID?window.webkit.messageHandlers.getSRID.postMessage({placeholder:"placeholder"}):j("native_bridge_error","Snap ios bridge missing. window.webkit defined: "+(void 0!==window.webkit)))}catch(e){j("native_bridge_error","getSRIDFromNative error: "+e.message,e.stack)}}}(),window.snaptr.handleRequest=,window.snaptr.clean=te,function(e){var n=!1;function t(){n||(n=!0,e())}if("complete"===document.readyState)return void t();if("interactive"===document.readyState)return void setTimeout(t,0);if(document.addEventListener)document.addEventListener("load",t,!1);else if(document.attachEvent){var i=null!=window.frameElement;if(document.documentElement.scroll&&!i){var o=;o()}document.attachEvent("onreadystatechange",())}window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent&&window.attachEvent("onload",t)}(te)}catch(e){O("init_error","Initialization error: "+e.message,e.stack)}function ne(e){var n=Array.prototype.slice.call(e),t=n.shift();switch(t&&t.toLowerCase&&(t=t.toLowerCase()),t){case"init":W(n,(function(){te()}));break;case"track":!function(e){if(E.pixelIdList&&E.pixelIdList.length>0){if("string"==typeof e[0])switch(1===e.length&&(e=[e[0],{}]),e.length){case 2:if("string"==typeof e[1]){if(!p(r=e[0]))return;var n=e[1];-1!==E.pixelIdList.indexOf(r)?K(r,n):j("invalid_params","Invalid pixel id: "+r)}else for(var t=e[0],i=e[1],o=0;o<E.pixelIdList.length;o++)K(E.pixelIdList[o],t,i);break;case 3:var r;if(!p(r=e[0]))return;var a=e[1];i=e[2],-1!==E.pixelIdList.indexOf(r)?K(r,a,i):j("invalid_params","Invalid pixel id: "+r);break;default:j("invalid_params","Invalid track parameters: "+e)}}else j("invalid_params","Invalid pixel id in formatQueryForTrack: "+E.pixelIdList)}(n);break;case"autofill":!(n);break;case"immersive_mode":!(n);break;case"cm":!(n);break;default:j("invalid_params","Request parsing failed")}}function te(){try{window.triedToSendCookieToNative||(!function(){try{if(J()||H()){B();var e=E.cookie1;e&&J()?window.JSBridge&&window.JSBridge.onCookieId?window.JSBridge.onCookieId(e):j("native_bridge_error","Snap android bridge missing. JSBridge defined: "+(void 0!==window.JSBridge)):e&&H()&&(window.webkit&&window.webkit.messageHandlers.onCookieId?window.webkit.messageHandlers.onCookieId.postMessage({firstPartyCookie:e}):j("native_bridge_error","Snap ios bridge missing. window.webkit defined: "+(void 0!==window.webkit)))}}catch(e){j("native_bridge_error","passCookie1ToNative failed. error: "+e.message,e.stack)}}(),window.triedToSendCookieToNative=!0),function e(n){if(window.snaptr.queue&&window.snaptr.queue.length){if(E.cookieSynced&&E.hashState!==k.Loading||n<0)return ne(window.snaptr.queue.shift()),void(window.snaptr.queue.length>0&&te());setTimeout((function(){e(n-10)}),10)}}(1e4)}catch(e){j("queue_error","clean queue error: "+e.message,e.stack)}}}();