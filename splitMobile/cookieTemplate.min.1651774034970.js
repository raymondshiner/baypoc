var ChatManager=;var BaseView=Backbone.View.extend({defaultEvents:{"click .sf-service-trigger, .js-service-trigger":"openService","keypress .sf-service-trigger, .js-service-trigger":"openService","touchstart .sf-service-trigger, .js-service-trigger":"openService"},initialize:function(){var self=this,method=window.addEventListener?"addEventListener":"attachEvent",message=window.addEventListener?"message":"onmessage";window[method](message,function(event){self.handleMessage(event)},false);_.extend(this.events,BaseView.prototype.defaultEvents);this.initVars();this.initFirebase();this.initMultilang()},initChatManager:,initMultilang:function(){var lng=this.getVar("sf-locale");var lngFallBack=this.getVar("sf-locale-fallback")?this.getVar("sf-locale-fallback"):lng;if(window.i18nloaded){return}window.i18nloaded=true;window.i18next.init({debug:false,lng:lng,fallbackLng:lngFallBack,resources:{en_US:{translation:{dropdown_any_specialty:"Any Specialty",dropdown_placeholder:"Select a Specialty",dropdown_required:"Required",categories_and:" and ",categories_other:" and other specialties",customer_email_validation:"Please enter a valid email",virtual_store_ambassador:"Ambassador - {{name}}",user_type_customer:"Customer",button_connect:"CONNECT",button_leave_message:"LEAVE A MESSAGE",and:"and",carousel_located:"are located in",carousel_rep_text:"{{name}} is available now.",chat_quit_active:"You are about to leave an active chat session.",chat_message_sent:"Sent. Not seen yet.",chat_missed_request:"You missed a chat request, you are now offline.",chat_session_disconnected:"The chat session has been disconnected",chat_customer_idle:"Your Customer is idle",chat_customer_left:"Your Customer has left the chat",chat_customer_active:"The Customer is no longer idle",chat_customer_disconnected:"Your Customer got disconnected",chat_request_neutral:"Incoming Chat Request for {{store}}",chat_request_sidebar:"Incoming Sidebar Chat Request for {{store}}",chat_request_storefront:"Incoming Storefront Chat Request for {{name}}",toast_message_brand:"Incoming Chat Request for {{brand}}",toast_message_neutral:"Incoming Chat Request for {{store}}",toast_message_sidebar:"Incoming Sidebar Chat Request for {{store}}",toast_message_storefront:"Incoming Storefront Chat Request for {{name}}",toast_message_top3:"You are in the top 3 of the Live Chat queue. Are you still available?",toast_message_broadcast_heartbeat:"You are eligible to receive Live Chat requests. Are you still available?",toast_message_next:"You are up next, and will receive the next Chat soon. Do you want to remain in the queue?",toast_message_missed:"You missed a Chat request. Are you still available?",toast_message_checking:"Just checking in, are you still available for Live Chat?",toast_message_inactive:"You did not confirm your availability for Live Chat and have been removed. Do you want to re-join?",chat_flag_confirmation:"Are you sure you want to flag this conversation? \nThe other party will be warned and the session will be disconnected",customer_chat_flagged:"You've been Flagged and reported",customer_chat_flagged_descriptive:"This conversation was flagged for review and the session has been disconnected.",chat_to_cs_rep:"This conversation was transfered to Customer Service and the session has been disconnected.",chat_to_cs_customer:"In order to better handle this request, I am transferring you to our Customer Support chat. You will be connected momentarily.",chat_to_cs_confirm:"Are you sure you want to transfer this conversation to Customer Service? The customer will be notified and the session will be disconnected.",video_chat_ended:"Connection ended by Customer",video_chat_declined:"Connection declined by Customer",video_chat_timedout:"Connection timed out",virtual_rep_disconnect:"{{user}} has left the meeting",virtual_rep_joined:"{{user}} joined the meeting"}},en_IE:{translation:{dropdown_any_specialty:"Any Specialty",dropdown_placeholder:"Select a Specialty",dropdown_required:"Required",categories_and:" and ",categories_other:" and other specialties",customer_email_validation:"Please enter a valid email",virtual_store_ambassador:"Ambassador - {{name}}",user_type_customer:"Customer",button_connect:"CONNECT",button_leave_message:"LEAVE A MESSAGE",and:"and",carousel_located:"are located in",carousel_rep_text:"{{name}} is available now.",chat_quit_active:"You are about to leave an active chat session.",chat_message_sent:"Sent. Not seen yet.",chat_missed_request:"You missed a chat request, you are now offline.",chat_session_disconnected:"The chat session has been disconnected",chat_customer_idle:"Your Customer is idle",chat_customer_left:"Your Customer has left the chat",chat_customer_active:"The Customer is no longer idle",chat_customer_disconnected:"Your Customer got disconnected",chat_request_neutral:"Incoming Chat Request for {{store}}",chat_request_sidebar:"Incoming Sidebar Chat Request for {{store}}",chat_request_storefront:"Incoming Storefront Chat Request for {{name}}",toast_message_brand:"Incoming Chat Request for {{brand}}",toast_message_neutral:"Incoming Chat Request for {{store}}",toast_message_sidebar:"Incoming Sidebar Chat Request for {{store}}",toast_message_storefront:"Incoming Storefront Chat Request for {{name}}",toast_message_top3:"You are in the top 3 of the Live Chat queue. Are you still available?",toast_message_broadcast_heartbeat:"You are eligible to receive Live Chat requests. Are you still available?",toast_message_next:"You are up next, and will receive the next Chat soon. Do you want to remain in the queue?",toast_message_missed:"You missed a Chat request. Are you still available?",toast_message_checking:"Just checking in, are you still available for Live Chat?",toast_message_inactive:"You did not confirm your availability for Live Chat and have been removed. Do you want to re-join?",chat_flag_confirmation:"Are you sure you want to flag this conversation? \nThe other party will be warned and the session will be disconnected",customer_chat_flagged:"You've been Flagged and reported",customer_chat_flagged_descriptive:"This conversation was flagged for review and the session has been disconnected.",chat_to_cs_rep:"This conversation was transfered to Customer Service and the session has been disconnected.",chat_to_cs_customer:"In order to better handle this request, I am transferring you to our Customer Support chat. You will be connected momentarily.",chat_to_cs_confirm:"Are you sure you want to transfer this conversation to Customer Service? The customer will be notified and the session will be disconnected.",video_chat_ended:"Connection ended by Customer",video_chat_declined:"Connection declined by Customer",video_chat_timedout:"Connection timed out",virtual_rep_disconnect:"{{user}} has left the meeting",virtual_rep_joined:"{{user}} joined the meeting"}},en_IN:{translation:{dropdown_any_specialty:"Any Specialty",dropdown_placeholder:"Select a Specialty",dropdown_required:"Required",categories_and:" and ",categories_other:" and other specialties",customer_email_validation:"Please enter a valid email",virtual_store_ambassador:"Ambassador - {{name}}",user_type_customer:"Customer",button_connect:"CONNECT",button_leave_message:"LEAVE A MESSAGE",and:"and",carousel_located:"are located in",carousel_rep_text:"{{name}} is available now.",chat_quit_active:"You are about to leave an active chat session.",chat_message_sent:"Sent. Not seen yet.",chat_missed_request:"You missed a chat request, you are now offline.",chat_session_disconnected:"The chat session has been disconnected",chat_customer_idle:"Your Customer is idle",chat_customer_left:"Your Customer has left the chat",chat_customer_active:"The Customer is no longer idle",chat_customer_disconnected:"Your Customer got disconnected",chat_request_neutral:"Incoming Chat Request for {{store}}",chat_request_sidebar:"Incoming Sidebar Chat Request for {{store}}",chat_request_storefront:"Incoming Storefront Chat Request for {{name}}",toast_message_brand:"Incoming Chat Request for {{brand}}",toast_message_neutral:"Incoming Chat Request for {{store}}",toast_message_sidebar:"Incoming Sidebar Chat Request for {{store}}",toast_message_storefront:"Incoming Storefront Chat Request for {{name}}",toast_message_top3:"You are in the top 3 of the Live Chat queue. Are you still available?",toast_message_broadcast_heartbeat:"You are eligible to receive Live Chat requests. Are you still available?",toast_message_next:"You are up next, and will receive the next Chat soon. Do you want to remain in the queue?",toast_message_missed:"You missed a Chat request. Are you still available?",toast_message_checking:"Just checking in, are you still available for Live Chat?",toast_message_inactive:"You did not confirm your availability for Live Chat and have been removed. Do you want to re-join?",chat_flag_confirmation:"Are you sure you want to flag this conversation? \nThe other party will be warned and the session will be disconnected",customer_chat_flagged:"You've been Flagged and reported",customer_chat_flagged_descriptive:"This conversation was flagged for review and the session has been disconnected.",chat_to_cs_rep:"This conversation was transfered to Customer Service and the session has been disconnected.",chat_to_cs_customer:"In order to better handle this request, I am transferring you to our Customer Support chat. You will be connected momentarily.",chat_to_cs_confirm:"Are you sure you want to transfer this conversation to Customer Service? The customer will be notified and the session will be disconnected.",video_chat_ended:"Connection ended by Customer",video_chat_declined:"Connection declined by Customer",video_chat_timedout:"Connection timed out"}},fr_CA:{translation:{dropdown_any_specialty:"Toutes les Spécialités",dropdown_placeholder:"Choisir une spécialité",dropdown_required:"requis",categories_and:" et ",categories_other:" et autres spécialités",customer_email_validation:"Veuillez entrer une adresse courriel valide",virtual_store_ambassador:"Ambassadeur - {{name}}",user_type_customer:"Client",button_connect:"SE CONNECTER",button_leave_message:"LAISSER UN MESSAGE",and:"et",carousel_located:"sont situés à",carousel_rep_text:"{{name}} est disponible.",chat_quit_active:"Vous êtes sur le point de quitter une session de clavardage active.",chat_message_sent:"Envoyé. Non lu.",chat_missed_request:"Vous avez manqué une demande de clavardage, vous êtes maintenant hors ligne.",chat_session_disconnected:"La séance de clavardage a été déconnectée.",chat_customer_idle:"Votre client est inactif",chat_customer_left:"Votre client a quitté le clavardage",chat_customer_active:"Le client est actif à nouveau",chat_customer_disconnected:"Votre client a été déconnecté",chat_request_neutral:"Demande de clavardage entrante pour {{store}}",chat_request_sidebar:"Demande de clavardage entrante pour {{store}}",chat_request_storefront:"Demande de clavardage entrante pour {{name}}",toast_message_brand:"Demande de clavardage entrante pour {{brand}}",toast_message_neutral:"Demande de clavardage entrante pour {{store}}",toast_message_sidebar:"Demande de clavardage entrante pour {{store}}",toast_message_storefront:"Demande de clavardage entrante pour {{name}}",toast_message_top3:"Vous êtes dans le top 3 de la file d'attente de clavardage. Êtes-vous toujours disponible?",toast_message_broadcast_heartbeat:"Vous êtes éligible à recevoir les demandes de clavardage. Êtes-vous toujours disponible?",toast_message_next:"Vous êtes le suivant, et receverez une demande de clavardage prochainement. Voulez-vous rester en file?",toast_message_missed:"Vous avez manqué une demande de clavardage. Êtes-vous toujours disponible?",toast_message_checking:"Êtes-vous toujours disponible pour clavarder?",toast_message_inactive:"Vous avez manqué une demande de clavardage. Êtes-vous toujours disponible?",chat_flag_confirmation:"Êtes-vous certain de vouloir signaler cette conversation? \nL’autre partie sera avertie et la session sera déconnectée",customer_chat_flagged:"Vous avez été signalé",customer_chat_flagged_descriptive:"Cette conversation a été signalée à des fins d'examen et la séance a été interrompue.",chat_to_cs_rep:"Cette conversation a été transférée au service clientèle et la session a été déconnectée.",chat_to_cs_customer:"Afin de mieux gérer cette demande, je vous transfère vers notre chat de support client. Vous serez connecté momentanément.",chat_to_cs_confirm:"Êtes-vous sûr de vouloir transférer cette conversation au service client? Le client sera averti et la session sera déconnectée.",video_chat_ended:"Connexion terminée par le client",video_chat_declined:"Connexion refusée par le client",video_chat_timedout:"Connexion expirée",virtual_rep_disconnect:"{{user}} a quitté le rendez-vous",virtual_rep_joined:"{{user}} a rejoint le rendez-vous"}},nl_NL:{translation:{button_connect:"VERBINDEN",virtual_store_ambassador:"Ambassadeur - {{name}}",user_type_customer:"Klant",categories_other:"en andere specialiteiten",customer_email_validation:"Voer een geldig e-mailadres in",dropdown_required:"Vereist",categories_and:"en",dropdown_any_specialty:"Elke specialiteit",video_chat_timedout:"Time-out bij verbinding",carousel_located:"bevinden zich in",chat_missed_request:"U hebt een chataanvraag gemist",chat_quit_active:"U staat op het punt een actieve chatsessie te verlaten.",chat_session_disconnected:"De verbinding met de chatsessie is verbroken",chat_message_sent:"Verzonden. Nog niet gezien.",chat_request_sidebar:"Inkomende zijbalk chataanvraag voor {{store}}",chat_request_neutral:"Inkomende chataanvraag voor {{store}}",toast_message_broadcast_heartbeat:"U komt in aanmerking voor het ontvangen van Live chat-aanvragen. Bent u nog steeds beschikbaar?",toast_message_top3:"U bevindt zich in de top 3 van de wachtrij voor live chat. Bent u nog steeds beschikbaar?",toast_message_missed:"U hebt een chataanvraag gemist. Bent u nog steeds beschikbaar?",toast_message_next:"U bent de volgende",toast_message_inactive:"U hebt uw beschikbaarheid voor live chat niet bevestigd en bent verwijderd. Wilt u opnieuw deelnemen?",toast_message_checking:"Ik kom alleen even langs",customer_chat_flagged:"U bent gemarkeerd en er is melding gedaan",chat_flag_confirmation:"Weet u zeker dat u dit gesprek wilt markeren? De andere partij wordt gewaarschuwd en de sessie wordt afgesloten",chat_to_cs_rep:"Dit gesprek is overgedragen aan de klantenservice en de sessie is verbroken.",customer_chat_flagged_descriptive:"Dit gesprek is gemarkeerd voor beoordeling en de sessie is verbroken.",chat_to_cs_customer:"Om dit verzoek beter af te handelen",chat_to_cs_confirm:"Weet u zeker dat u dit gesprek wilt overdragen naar de klantenservice? De klant wordt op de hoogte gebracht en de sessie wordt afgesloten.",video_chat_ended:"Verbinding beëindigd door klant",toast_message_storefront:"Inkomend Storefront chataanvraag voor {{name}}",toast_message_brand:"Inkomende chataanvraag voor {{brand}}",chat_request_storefront:"Inkomend Storefront chataanvraag voor {{name}}",chat_customer_idle:"Uw klant is inactief",chat_customer_disconnected:"De verbinding met uw klant is verbroken",chat_customer_active:"De klant is niet langer inactief",chat_customer_left:"Uw klant heeft de chat verlaten",toast_message_sidebar:"Inkomende zijbalk chataanvraag voor {{store}}",toast_message_neutral:"Inkomende chataanvraag voor {{store}}",video_chat_declined:"Verbinding geweigerd door klant",button_leave_message:"EEN BERICHT ACHTERLATEN",dropdown_placeholder:"Selecteer een specialiteit",and:"en",carousel_rep_text:"{{name}} is nu beschikbaar.",virtual_rep_disconnect:"{{user}} heeft de vergadering verlaten",virtual_rep_joined:"{{user}} heeft zich bij de vergadering gevoegd"}},ja_JP:{translation:{categories_and:" および ",categories_other:" その他の専門分野",customer_email_validation:"有効なEメールアドレスを入力してください",virtual_store_ambassador:"アンバサダー - {{name}}",user_type_customer:"顧客",button_connect:"接続",button_leave_message:"メッセージを残す",and:"および",carousel_located:"所在地：",carousel_rep_text:"只今、{{name}}が対応いたします。",chat_quit_active:"あなたはアクティブなチャットセッションから退出しようとしています。",chat_message_sent:"送信されました。まだ見ていない。",chat_missed_request:"あなたはチャットリクエストの着信時に不在でした。現在オフラインになっています。",chat_session_disconnected:"チャットセッションが切断されました",chat_customer_idle:"お客様が待機状態です",chat_customer_left:"お客様がチャットから退出しました",chat_customer_active:"お客様は待機状態ではありません",chat_customer_disconnected:"お客様が接続を切断しました",chat_request_neutral:"{{store}}への着信中のチャットリクエスト",chat_request_sidebar:"{{store}}への着信中のサイドバーのチャットリクエスト",chat_request_storefront:"{{name}}への着信中のウェブストアのチャットリクエスト",toast_message_brand:"{{brand}}への着信中のチャットリクエスト",toast_message_neutral:"{{store}}への着信中のチャットリクエスト",toast_message_sidebar:"{{store}}への着信中のサイドバーのチャットリクエスト",toast_message_storefront:"{{name}}への着信中のウェブストアのチャットリクエスト",toast_message_top3:"あなたはライブチャットのキューのトップ3にいます。まだチャットに参加できますか？",toast_message_broadcast_heartbeat:"あなたはライブチャットのリクエストを受信する資格があります。まだチャットに参加できますか？",toast_message_next:"次はあなたの番です。次のチャットが間もなく始まります。キューに留まりますか？",toast_message_missed:"チャットリクエストを逃しました。まだチャットに参加できますか？",toast_message_checking:"チェックインしています。まだライブチャットに参加できますか？",toast_message_inactive:"ライブチャットに参加できるかどうか確認できなかったので、削除されました。もう一度参加しますか？",chat_flag_confirmation:"この会話にフラグを立てますか？ \n相手側に警告が表示され、セッションが切断されます。",customer_chat_flagged:"フラグが立てられ、報告されました",customer_chat_flagged_descriptive:"この会話はレビュー対象としてフラグが立てられ、セッションが切断されました。",chat_to_cs_rep:"この会話は顧客サービスに転送され、セッションは切断されました。",chat_to_cs_customer:"このリクエストにうまく対応できるよう、顧客サポートチャットに転送します。すぐにつながります。",chat_to_cs_confirm:"この会話を顧客サービスに転送しますか？ お客様に通知され、セッションが切断されます。",video_chat_ended:"お客様が接続を終了しました",video_chat_declined:"お客様が接続を拒否しました",video_chat_timedout:"接続がタイムアウトしました",virtual_rep_disconnect:"{{user}}がミーティングから退席しました",virtual_rep_joined:"{{users}}さんがミーティングに参加しました",dropdown_required:"必須",dropdown_any_specialty:"任意の専門分野",dropdown_placeholder:"専門分野を選択"}}}},function(err,t){})},initVars:function(){this.sfVars=$("#sf-vars");this.currentUser=this.getVar("user");this.currentUserId=this.getVar("user-id");this.currentEnv=this.getVar("env");this.currentRetailer=this.getVar("retailer");this.prettyName=this.getVar("pretty-name");this.currentStoreId=this.getVar("store-id");this.currentStoreIdentifier=this.getVar("store-identifier");this.currentStoreName=this.getVar("store-name");this.currentType=this.getVar("type");this.currentMode=this.getVar("mode");this.saleCookieExpire=this.getVar("salecookie");this.attachedServices=this.getVar("attached");this.admin=this.getVar("admin");this.repName=this.getVar("repname");this.webHost=this.getVar("storefront");this.cookiePrefix=this.getVar("cookieprefix");this.virtualStore=this.getVar("virtual-store");this.virtualStoreId=this.getVar("virtual-store-id");this.api=this.getVar("api");this.employeeId=this.getVar("employee-id");this.findrepName=this.getVar("findrep-name");this.firstName=this.getVar("first-name");this.lastName=this.getVar("last-name");this.displayLastNamesOnly=this.getVar("display-last-names-only");this.isQueueActive=this.getVar("is-queue-active");this.isMultibrand=this.getVar("is-multibrand");this.otherBrand=this.getVar("other-brand");this.otherBrandHost=this.getVar("other-brand-host");this.firebaseInstance=this.getVar("firebase-url");this.chatDelay=this.getVar("chat-delay");this.context=this.getVar("from");this.embed=this.getVar("embed");this.selectSpecialty=this.getVar("select-specialty");this.repsHaveSpecialty=this.getVar("reps-have-specialty");this.specialtyIsRequired=this.getVar("specialty-required");this.sidebarTrackingEnabled=this.sidebar2TrackingEnabled||this.getVar("sidebar-tracking-enabled");this.landingPositionEnabled=this.getVar("landing-position-enabled");this.landingHorizontalPosition=this.getVar("landing-horizontal-position");this.landingAtBottom=this.getVar("landing-at-bottom");this.sfLocale=this.getVar("sf-locale");this.isNearbyStoresEnabled=!!this.getVar("is-nearby-stores-enabled");if(this.isNearbyStoresEnabled){this.nearestStores=this.getVar("nearest-stores");this.originalStoreIdentifier=this.getVar("original-store-identifier")}this.isVirtualAppointment=!!this.getVar("appointment-id");this.appointmentId=this.getVar("appointment-id");this.appointmentStatus=this.getVar("appointment-status");this.appointmentEndDate=this.getVar("appointment-end");this.appointmentStartDate=this.getVar("appointment-start");this.customerId=this.getVar("customer-id");this.customerName=this.getVar("customer-name");this.customerEmail=this.getVar("customer-email");this.retailerPricePrecision=this.getVar("retailer-price-precision");this.retailerPricePrecisionHideEmptyDecimals=this.getVar("retailer-price-precision-hide-empty-decimals");this.isSidebarChatAvailabilityStatusEnabled=this.getVar("is-sidebar-chat-availability-status-enabled");this.repNameTemplate=this.getVar("chat-rep-name-template");this.retailerBrandName=this.getVar("retailer-brand-name");if(this.currentType==="rep"){this.virtualStore=""}},capitalize:,specialCharacters:,formatRepName:,enableAndAddToQueue:,disableAndRemoveFromQueue:,initFirebase:function(){if(this.currentEnv==="travis"){this.currentEnv="int"}this.firebaseBaseUrl=this.firebaseInstance+this.currentEnv+"/"+this.currentRetailer;this.basePresenceUrl=this.firebaseBaseUrl+"/presence";this.baseVirtualUrl=this.firebaseBaseUrl+"/virtual"},initSecurity:,getVar:function(id){return this.sfVars.data(id)},handleMessage:function(event){var data;if(event&&event.data&&event.data!=="sf_handshake"){try{data=JSON.parse(event.data)}catch(e){return false}}if(!data||data==="sf_handshake"){this.parent=event.source;this.origin=event.origin;BaseView.prototype.parent=this.parent;BaseView.prototype.origin=this.origin;this.afterHandshake&&this.afterHandshake()}else if(data.args){this[data.action]&&this[data.action].apply(this,data.args)}else if(this[data.action]){this[data.action]&&this[data.action].call(this,data)}else if(typeof data.allowBubbling!=="undefined"&&data.allowBubbling){this.parent&&this.parent.postMessage(event.data,this.origin)}},handleError:,addSource:,logEvent:,pushEventQueue:,pushViewEvent:,checkEventQueueFingerprint:,openService:,addParamsForNearbyStoresToUrl:,getTopPosition:,getLeftPosition:,stopIntervalCheck:,getCookie:,setCookie:,removeCookie:,initUserRef:,connectPresence:,setPresenceListener:,setRequestListener:,onRequestValue:,sanitizeEnabled:,sanitizePresenceList:,onUserValue:,onAmbassadorValue:,onPresenceValue:,setUserStatus:,setPresenceUI:,isEnableObject:,isPresenceList:,getType:,getAmbassadorRef:,getRefPromise:,getAmbassadorPromise:,getRepPromise:,getEmptyPromise:,pushNotification:,trackChatActivity:,logFlaggedChat:,updateFlaggedChatData:,getConnectedReps:,applyRepTypeMap:,getAllReps:,getRepsOnly:,getVirtualsOnly:,filterConnectedReps:,pushExcludeRep:,getCurrentFirebaseStamp:,switchUserStatus:,switchRepStatus:,switchVirtualStatus:,applyWithCurrentStatus:,buildRepObject:,sendLoopToCurrentRepIfAvailable:,getLoopParams:,getLoopCountParam:,sendLoopNotification:,handleRepDeclined:,resetChatQueueLoopInterval:,isStore:,getCurrentId:,applyBeforePredicate:,wrapReturn:,removeParamFromUrl:,replaceParamInUrl:,addParamInUrl:});_.extend(Backbone.Validation.patterns,{email:/^(?!\.)((?!.*\.{2})[a-zA-Z0-9\+\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF\.!#$%&'*+-/=?^_`{|}~\-\d]+)@(?!\.)([a-zA-Z0-9\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF\-\.\d]+)((\.([a-zA-Z\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF]){2,63})+)$/i});var CookieView=BaseView.extend({name:"cookie",initialize:function(){var self=this;this.constructor.__super__.initialize.apply(this)},afterHandshake:function(){this.sendCookie()},sendCookie:function(){if(/MSIE/.test(navigator.userAgent)||!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)){var self=this;$.getJSON("/cookies/manager/cookies",);$.getJSON("/cookies/manager/vars",)}else{var jsonCookies=$("#sf-cookies").data();var cookies=decodeURIComponent($.param(jsonCookies).replace(/&/g,";"));this.setMessage(cookies);this.handleClaimedLead()}},setMessage:function(cookies){var data=JSON.stringify({action:"sendCookie",widget:"cookie",cookies:cookies});this.parent&&this.parent.postMessage(data,this.origin)},alerts:,handleClaimedLead:function(){var affiliateURL,repID,employeeID,employeeName,self=this;this.retailer=$("#sf-vars").data("retailer");affiliateURL=$("#sf-vars").data("affiliateurl"),repID=$("#sf-vars").data("replogin");var data=$("#sf-vars").data();this.postAffiliateData(affiliateURL,repID);this.postAdditionalTrackingData(data)},handleIEClaimLead:,postAffiliateData:function(affiliateURL,repID){if(affiliateURL||repID){var data=JSON.stringify({action:"setImgAffiliate",widget:"cookie",affiliateURL:affiliateURL,repId:repID});this.parent&&this.parent.postMessage(data,this.origin)}},postAdditionalTrackingData:function(postData){var data=JSON.stringify({action:"setAdditionalTrackingCookies",widget:"cookie",data:postData});this.parent&&this.parent.postMessage(data,this.origin)}});var myCookieView=new CookieView;